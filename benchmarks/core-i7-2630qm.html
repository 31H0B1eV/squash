<!DOCTYPE html>
<html>
  <head>
    <title>Squash Benchmarks</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <style type="text/css">
      body {
        padding: 0 10%;
      }

      h1, h2, h3 {
        border-bottom: 1px black solid;
      }

			noscript {
			  background-color: #fdd;
			  border: 2px red solid;
			  display: block;
			  padding: 1em;
			  margin: 1em;
			}
    </style>
    <script type="text/javascript">
var benchmark_data =
{
  "iliad": {
    "uncompressed-size": 1308638,
    "data": [
      {
        "plugin": "blosc",
        "codec": "blosc",
        "size": 772768,
        "compress_cpu": 0.0104373,
        "compress_wall": 0.0104398,
        "decompress_cpu": 0.00565415,
        "decompress_wall": 0.0056566
      }, {
        "plugin": "bzip2",
        "codec": "bzip2",
        "size": 323136,
        "compress_cpu": 0.137021,
        "compress_wall": 0.137023,
        "decompress_cpu": 0.0945835,
        "decompress_wall": 0.0945924
      }, {
        "plugin": "doboz",
        "codec": "doboz",
        "size": 472740,
        "compress_cpu": 0.46654,
        "compress_wall": 0.466541,
        "decompress_cpu": 0.00314562,
        "decompress_wall": 0.00314831
      }, {
        "plugin": "fastlz",
        "codec": "fastlz",
        "size": 721951,
        "compress_cpu": 0.00801257,
        "compress_wall": 0.00802038,
        "decompress_cpu": 0.00505275,
        "decompress_wall": 0.00505443
      }, {
        "plugin": "lz4",
        "codec": "lz4",
        "size": 733554,
        "compress_cpu": 0.00633561,
        "compress_wall": 0.0063379,
        "decompress_cpu": 0.0016841,
        "decompress_wall": 0.00168548
      }, {
        "plugin": "lzf",
        "codec": "lzf",
        "size": 700643,
        "compress_cpu": 0.00843983,
        "compress_wall": 0.00844935,
        "decompress_cpu": 0.00437423,
        "decompress_wall": 0.0043762
      }, {
        "plugin": "lzg",
        "codec": "lzg",
        "size": 672367,
        "compress_cpu": 0.1249,
        "compress_wall": 0.125058,
        "decompress_cpu": 0.00497485,
        "decompress_wall": 0.004976
      }, {
        "plugin": "lzma",
        "codec": "lzma",
        "size": 340671,
        "compress_cpu": 0.69107,
        "compress_wall": 0.691093,
        "decompress_cpu": 0.0264275,
        "decompress_wall": 0.0264288
      }, {
        "plugin": "lzma",
        "codec": "lzma1",
        "size": 340658,
        "compress_cpu": 0.694427,
        "compress_wall": 0.694441,
        "decompress_cpu": 0.0257319,
        "decompress_wall": 0.025734
      }, {
        "plugin": "lzma",
        "codec": "lzma2",
        "size": 340707,
        "compress_cpu": 0.696376,
        "compress_wall": 0.69639,
        "decompress_cpu": 0.0260299,
        "decompress_wall": 0.0260328
      }, {
        "plugin": "lzma",
        "codec": "xz",
        "size": 340764,
        "compress_cpu": 0.698104,
        "compress_wall": 0.698105,
        "decompress_cpu": 0.0278226,
        "decompress_wall": 0.0278245
      }, {
        "plugin": "lzmat",
        "codec": "lzmat",
        "size": 521313,
        "compress_cpu": 0.0739407,
        "compress_wall": 0.0739426,
        "decompress_cpu": 0.0107993,
        "decompress_wall": 0.0108008
      }, {
        "plugin": "lzo",
        "codec": "lzo1",
        "size": 754220,
        "compress_cpu": 0.00866619,
        "compress_wall": 0.008669,
        "decompress_cpu": 0.00503174,
        "decompress_wall": 0.00503292
      }, {
        "plugin": "lzo",
        "codec": "lzo1a",
        "size": 745678,
        "compress_cpu": 0.00848348,
        "compress_wall": 0.00848539,
        "decompress_cpu": 0.00461263,
        "decompress_wall": 0.00461408
      }, {
        "plugin": "lzo",
        "codec": "lzo1b",
        "size": 678002,
        "compress_cpu": 0.01038,
        "compress_wall": 0.0103819,
        "decompress_cpu": 0.00473046,
        "decompress_wall": 0.00473232
      }, {
        "plugin": "lzo",
        "codec": "lzo1c",
        "size": 705463,
        "compress_cpu": 0.0105274,
        "compress_wall": 0.0105296,
        "decompress_cpu": 0.0049288,
        "decompress_wall": 0.00493123
      }, {
        "plugin": "lzo",
        "codec": "lzo1f",
        "size": 723601,
        "compress_cpu": 0.0115161,
        "compress_wall": 0.0115176,
        "decompress_cpu": 0.00489351,
        "decompress_wall": 0.0048954
      }, {
        "plugin": "lzo",
        "codec": "lzo1x",
        "size": 720510,
        "compress_cpu": 0.00607429,
        "compress_wall": 0.00607635,
        "decompress_cpu": 0.00489375,
        "decompress_wall": 0.00489547
      }, {
        "plugin": "lzo",
        "codec": "lzo1y",
        "size": 735692,
        "compress_cpu": 0.00594361,
        "compress_wall": 0.0059456,
        "decompress_cpu": 0.00486704,
        "decompress_wall": 0.00486865
      }, {
        "plugin": "lzo",
        "codec": "lzo1z",
        "size": 509253,
        "compress_cpu": 0.242925,
        "compress_wall": 0.242933,
        "decompress_cpu": 0.00785999,
        "decompress_wall": 0.00786073
      }, {
        "plugin": "quicklz",
        "codec": "quicklz",
        "size": 671006,
        "compress_cpu": 0.00666933,
        "compress_wall": 0.00667845,
        "decompress_cpu": 0.00502692,
        "decompress_wall": 0.00502949
      }, {
        "plugin": "sharc",
        "codec": "sharc",
        "size": 794278,
        "compress_cpu": 0.0033733,
        "compress_wall": 0.00337572,
        "decompress_cpu": 0.0022522,
        "decompress_wall": 0.0022533
      }, {
        "plugin": "snappy",
        "codec": "snappy",
        "size": 730492,
        "compress_cpu": 0.00620431,
        "compress_wall": 0.00620625,
        "decompress_cpu": 0.00270229,
        "decompress_wall": 0.00270356
      }, {
        "plugin": "wflz",
        "codec": "wflz",
        "size": 811756,
        "compress_cpu": 0.0107563,
        "compress_wall": 0.010758,
        "decompress_cpu": 0.00387157,
        "decompress_wall": 0.00387411
      }, {
        "plugin": "zlib",
        "codec": "deflate",
        "size": 458721,
        "compress_cpu": 0.0794987,
        "compress_wall": 0.0795007,
        "decompress_cpu": 0.00651221,
        "decompress_wall": 0.00651355
      }, {
        "plugin": "zlib",
        "codec": "gzip",
        "size": 458739,
        "compress_cpu": 0.0816321,
        "compress_wall": 0.0816342,
        "decompress_cpu": 0.00790882,
        "decompress_wall": 0.0079108
      }, {
        "plugin": "zlib",
        "codec": "zlib",
        "size": 458727,
        "compress_cpu": 0.0800608,
        "compress_wall": 0.0800626,
        "decompress_cpu": 0.00709519,
        "decompress_wall": 0.00709673
      }, {
        "plugin": "zpaq",
        "codec": "zpaq",
        "size": 266179,
        "compress_cpu": 1.462,
        "compress_wall": 1.46307,
        "decompress_cpu": 1.55339,
        "decompress_wall": 1.5534
      }
    ]
  },
  "enwik8": {
    "uncompressed-size": 100000000,
    "data": [
      {
        "plugin": "blosc",
        "codec": "blosc",
        "size": 58503216,
        "compress_cpu": 0.777772,
        "compress_wall": 0.777779,
        "decompress_cpu": 0.418062,
        "decompress_wall": 0.418065
      }, {
        "plugin": "bzip2",
        "codec": "bzip2",
        "size": 29679648,
        "compress_cpu": 9.79884,
        "compress_wall": 9.79902,
        "decompress_cpu": 6.72234,
        "decompress_wall": 6.72242
      }, {
        "plugin": "doboz",
        "codec": "doboz",
        "size": 36867430,
        "compress_cpu": 43.0338,
        "compress_wall": 43.0345,
        "decompress_cpu": 0.254963,
        "decompress_wall": 0.254965
      }, {
        "plugin": "fastlz",
        "codec": "fastlz",
        "size": 55239233,
        "compress_cpu": 0.637409,
        "compress_wall": 0.637466,
        "decompress_cpu": 0.350743,
        "decompress_wall": 0.350746
      }, {
        "plugin": "lz4",
        "codec": "lz4",
        "size": 56973116,
        "compress_cpu": 0.448439,
        "compress_wall": 0.448523,
        "decompress_cpu": 0.13046,
        "decompress_wall": 0.130469
      }, {
        "plugin": "lzf",
        "codec": "lzf",
        "size": 53945381,
        "compress_cpu": 0.63082,
        "compress_wall": 0.630882,
        "decompress_cpu": 0.336497,
        "decompress_wall": 0.336512
      }, {
        "plugin": "lzg",
        "codec": "lzg",
        "size": 52213097,
        "compress_cpu": 5.12955,
        "compress_wall": 5.12964,
        "decompress_cpu": 0.401034,
        "decompress_wall": 0.401036
      }, {
        "plugin": "lzma",
        "codec": "lzma",
        "size": 26371635,
        "compress_cpu": 82.9095,
        "compress_wall": 82.9108,
        "decompress_cpu": 2.0613,
        "decompress_wall": 2.06132
      }, {
        "plugin": "lzma",
        "codec": "lzma1",
        "size": 26371622,
        "compress_cpu": 81.6134,
        "compress_wall": 81.6146,
        "decompress_cpu": 1.91101,
        "decompress_wall": 1.91103
      }, {
        "plugin": "lzma",
        "codec": "lzma2",
        "size": 26375703,
        "compress_cpu": 82.6902,
        "compress_wall": 82.6915,
        "decompress_cpu": 1.92503,
        "decompress_wall": 1.92505
      }, {
        "plugin": "lzma",
        "codec": "xz",
        "size": 26375764,
        "compress_cpu": 81.7258,
        "compress_wall": 81.7272,
        "decompress_cpu": 2.13072,
        "decompress_wall": 2.13074
      }, {
        "plugin": "lzmat",
        "codec": "lzmat",
        "size": 41270839,
        "compress_cpu": 4.91134,
        "compress_wall": 4.91144,
        "decompress_cpu": 0.496815,
        "decompress_wall": 0.496823
      }, {
        "plugin": "lzo",
        "codec": "lzo1",
        "size": 57975532,
        "compress_cpu": 0.670921,
        "compress_wall": 0.670974,
        "decompress_cpu": 0.373855,
        "decompress_wall": 0.373865
      }, {
        "plugin": "lzo",
        "codec": "lzo1a",
        "size": 57297087,
        "compress_cpu": 0.663282,
        "compress_wall": 0.663341,
        "decompress_cpu": 0.353361,
        "decompress_wall": 0.353368
      }, {
        "plugin": "lzo",
        "codec": "lzo1b",
        "size": 54056906,
        "compress_cpu": 0.834117,
        "compress_wall": 0.834188,
        "decompress_cpu": 0.370006,
        "decompress_wall": 0.370008
      }, {
        "plugin": "lzo",
        "codec": "lzo1c",
        "size": 55192389,
        "compress_cpu": 0.825531,
        "compress_wall": 0.825596,
        "decompress_cpu": 0.36649,
        "decompress_wall": 0.366506
      }, {
        "plugin": "lzo",
        "codec": "lzo1f",
        "size": 55958931,
        "compress_cpu": 0.871792,
        "compress_wall": 0.87186,
        "decompress_cpu": 0.385933,
        "decompress_wall": 0.385942
      }, {
        "plugin": "lzo",
        "codec": "lzo1x",
        "size": 55792795,
        "compress_cpu": 0.462721,
        "compress_wall": 0.46279,
        "decompress_cpu": 0.364649,
        "decompress_wall": 0.364659
      }, {
        "plugin": "lzo",
        "codec": "lzo1y",
        "size": 56368540,
        "compress_cpu": 0.456235,
        "compress_wall": 0.456299,
        "decompress_cpu": 0.366036,
        "decompress_wall": 0.366037
      }, {
        "plugin": "lzo",
        "codec": "lzo1z",
        "size": 40721443,
        "compress_cpu": 16.0345,
        "compress_wall": 16.0347,
        "decompress_cpu": 0.37765,
        "decompress_wall": 0.377659
      }, {
        "plugin": "quicklz",
        "codec": "quicklz",
        "size": 52334371,
        "compress_cpu": 0.501156,
        "compress_wall": 0.501208,
        "decompress_cpu": 0.394869,
        "decompress_wall": 0.394876
      }, {
        "plugin": "sharc",
        "codec": "sharc",
        "size": 61792966,
        "compress_cpu": 0.210009,
        "compress_wall": 0.210076,
        "decompress_cpu": 0.147718,
        "decompress_wall": 0.14772
      }, {
        "plugin": "snappy",
        "codec": "snappy",
        "size": 56539845,
        "compress_cpu": 0.440878,
        "compress_wall": 0.44096,
        "decompress_cpu": 0.190338,
        "decompress_wall": 0.190388
      }, {
        "plugin": "wflz",
        "codec": "wflz",
        "size": 63521804,
        "compress_cpu": 0.802243,
        "compress_wall": 0.802313,
        "decompress_cpu": 0.288472,
        "decompress_wall": 0.288485
      }, {
        "plugin": "zlib",
        "codec": "deflate",
        "size": 36548915,
        "compress_cpu": 5.98565,
        "compress_wall": 5.98578,
        "decompress_cpu": 0.508292,
        "decompress_wall": 0.508295
      }, {
        "plugin": "zlib",
        "codec": "gzip",
        "size": 36548933,
        "compress_cpu": 6.21375,
        "compress_wall": 6.21386,
        "decompress_cpu": 0.61776,
        "decompress_wall": 0.617781
      }, {
        "plugin": "zlib",
        "codec": "zlib",
        "size": 36548921,
        "compress_cpu": 5.98603,
        "compress_wall": 5.98613,
        "decompress_cpu": 0.542843,
        "decompress_wall": 0.542862
      }, {
        "plugin": "zpaq",
        "codec": "zpaq",
        "size": 20941523,
        "compress_cpu": 115.782,
        "compress_wall": 115.783,
        "decompress_cpu": 119.601,
        "decompress_wall": 119.602
      }
    ]
  }
};
(function(){
	function decimalAdjust(type, value, exp) {
		if (typeof exp === 'undefined' || +exp === 0) {
			return Math[type](value);
		}
		value = +value;
		exp = +exp;
		if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
			return NaN;
		}
		value = value.toString().split('e');
		value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
		value = value.toString().split('e');
		return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
	}

	if (!Math.round10) {
		Math.round10 = function(value, exp) {
			return decimalAdjust('round', value, exp);
		};
	}
	if (!Math.floor10) {
		Math.floor10 = function(value, exp) {
			return decimalAdjust('floor', value, exp);
		};
	}
	if (!Math.ceil10) {
		Math.ceil10 = function(value, exp) {
			return decimalAdjust('ceil', value, exp);
		};
	}
  if (!Array.prototype.forEach) {
    Array.prototype.forEach = function (fn, scope) {
      'use strict';
      var i, len;
      for (i = 0, len = this.length; i < len; ++i) {
        if (i in this) {
          fn.call(scope, this[i], i, this);
        }
      }
    };
  }
})();

google.load('visualization', '1', {packages:['table', 'corechart']});

var benchmark = new function () {
  var _this = this;

  _this.data = [];

  google.setOnLoadCallback(function () {
    var benchmark_names = Object.getOwnPropertyNames (benchmark_data);
    benchmark_names.forEach (function (dataset, i, a) {
      var data = new google.visualization.DataTable ();

      data.addColumn('string', 'Plugin');
      data.addColumn('string', 'Codec');
      data.addColumn('number', 'Compression Ratio');
      data.addColumn('number', 'Compression Speed (KB/s)');
      data.addColumn('number', 'Decompress Speed (KB/s)');

      var uncompressed_size = benchmark_data[dataset]["uncompressed-size"];

      data.addRows (benchmark_data[dataset].data.map (function (e) {
        return [e.plugin, e.codec,
                Math.round10 (uncompressed_size / e.size, -2),
                Math.round10 ((uncompressed_size / e.compress_cpu) / (1024), -2),
                Math.round10 ((uncompressed_size / e.decompress_cpu) / (1024), -2)];
      }));

      _this.data[dataset] = data;

      $("#datasets-list").append ('<li><a href="#' + dataset + '" onclick="benchmark.load(\'' + dataset + '\')">' + dataset + '</a></li>');
    });

    if (benchmark_names.length == 1) {
      this.load (benchmark_names[0]);
    }
  });

  this.load = function (name) {
    var visualizations = [];
    var result = $('<div id="' + name + '"></div>');

    $("#results").empty ().append (result);
    result.append ("<h2>" + name + " Results</h2>");

    {
      var result_table = $("<div></div>");
      result.append (result_table);
      var table = new google.visualization.Table (result_table.get (0));
      table.draw (_this.data[name]);
      visualizations.push (table);
    }

    {
      var compression_ratio_view = new google.visualization.DataView (_this.data[name]);
      compression_ratio_view.setColumns ([1, 2]);

      var compression_ratio_container = $("<div></div>");
      result.append (compression_ratio_container);
      var compression_ratio = new google.visualization.BarChart (compression_ratio_container.get (0));
      compression_ratio.draw (compression_ratio_view, {
        legend: 'none',
        title: 'Compression Ratio',
        vAxis: { title: 'Codecs' },
        height: ($("#results").innerWidth () * (9 / 16))
      });
      visualizations.push (compression_ratio);
    }

    {
      var speed_view = new google.visualization.DataView (_this.data[name]);
      speed_view.setColumns ([1, 3, 4]);

      var speed_container = $("<div></div>");
      result.append (speed_container);
      var speed = new google.visualization.BarChart (speed_container.get (0));
      speed.draw (speed_view, {
        title: 'Speed',
        vAxis: { title: 'Codecs' },
        hAxis: { title: 'Speed (KB/s)' },
        height: ($("#results").innerWidth () * (9 / 16))
      });
      visualizations.push (speed);
    }

    {
      var compression_ratio_vs_compression_speed_view = new google.visualization.DataView (_this.data[name]);
      compression_ratio_vs_compression_speed_view.setColumns ([
        3,
        2,
        { sourceColumn: 1, role: 'tooltip' }
      ]);
      var compression_ratio_vs_compression_speed_container = $("<div></div>");
      result.append (compression_ratio_vs_compression_speed_container);
      var compression_ratio_vs_compression_speed = new google.visualization.ScatterChart (compression_ratio_vs_compression_speed_container.get (0));
      compression_ratio_vs_compression_speed.draw (compression_ratio_vs_compression_speed_view, {
        legend: 'none',
        title: 'Compression Ratio vs. Compression Speed',
        vAxis: { title: 'Ratio', minValue: 0 },
        hAxis: { title: 'Speed (KB/s)', minValue: 0 },
        height: ($("#results").innerWidth () * (9 / 16))
      });
      visualizations.push (compression_ratio_vs_compression_speed);
    }

    {
      var compression_ratio_vs_decompression_speed_view = new google.visualization.DataView (_this.data[name]);
      compression_ratio_vs_decompression_speed_view.setColumns ([
        4,
        2,
        { sourceColumn: 1, role: 'tooltip' }
      ]);
      var compression_ratio_vs_decompression_speed_container = $("<div></div>");
      result.append (compression_ratio_vs_decompression_speed_container);
      var compression_ratio_vs_decompression_speed = new google.visualization.ScatterChart (compression_ratio_vs_decompression_speed_container.get (0));
      compression_ratio_vs_decompression_speed.draw (compression_ratio_vs_decompression_speed_view, {
        legend: 'none',
        title: 'Compression Ratio vs. Decompression Speed',
        vAxis: { title: 'Ratio', minValue: 0 },
        hAxis: { title: 'Decompression Speed (KB/s)', minValue: 0 },
        height: ($("#results").innerWidth () * (9 / 16))
      });
      visualizations.push (compression_ratio_vs_decompression_speed);
    }

    {
      var speed_compare_view = new google.visualization.DataView (_this.data[name]);
      speed_compare_view.setColumns ([
        3,
        4,
        { sourceColumn: 1, role: 'tooltip' }
      ]);
      var speed_compare_container = $("<div></div>");
      result.append (speed_compare_container);
      var speed_compare = new google.visualization.ScatterChart (speed_compare_container.get (0));
      speed_compare.draw (speed_compare_view, {
        legend: 'none',
        title: 'Compression Speed vs. Decompression Speed',
        hAxis: { title: 'Compression Speed (KB/s)', minValue: 0 },
        vAxis: { title: 'Decompression Speed (KB/s)', minValue: 0 },
        height: ($("#results").innerWidth () * (9 / 16))
      });
      visualizations.push (speed_compare);
    }

    visualizations.forEach (function (visualization) {
      google.visualization.events.addListener(visualization, 'select', function() {
        var selection = visualization.getSelection ();
        visualizations.forEach (function (v) {
          if (v !== visualization) {
            v.setSelection (selection);
          }
        });
      });
    });
  };
} ();
;
    </script>
  </head>
  <body>
    <h1>Squash Benchmark</h1>
    <h2>Basics</h2>

    <noscript>
      It looks like you have JavaScript disabled, but JavaScript is
      required to view this benchmark.
    </noscript>

    <p>
      This benchmark
      uses <a href="http://quixdb.github.io/squash/">Squash</a> to
      compress and decompress a series of files.  Times are given in
      seconds of <abbr>CPU</abbr> time.
    </p>

    <p>
      Currently, only the default options for each codec are given.
    </p>

    <p>
      The code used to generate this benchmark is in
      the <a href="https://github.com/quixdb/squash/tree/master/benchmark"><var>benchmark/</var>
      subdirectory of Squash</a>.
    </p>

    <h2>Datasets</h2>

    <ul id="datasets-list"></ul>

    <div id="results"></div>
  </body>
</html>
